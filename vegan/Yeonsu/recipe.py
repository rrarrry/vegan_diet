import streamlit as st
import streamlit.components.v1 as components

# 데이터베이스 예시: 음식 이름과 100g 당 영양소 정보
data = {
    "아보카도": {"칼로리": 160.0, "단백질": 2.0, "탄수화물": 8.5, "지방": 14.7, "철분": 0.6},
    "바나나": {"칼로리": 89.0, "단백질": 1.1, "탄수화물": 22.8, "지방": 0.3, "철분": 0.3},
    "토마토": {"칼로리": 18.0, "단백질": 0.9, "탄수화물": 3.9, "지방": 0.2, "철분": 0.3},
    "고구마": {"칼로리": 86.0, "단백질": 1.6, "탄수화물": 20.1, "지방": 0.1, "철분": 0.6},
    "병아리콩": {"칼로리": 164.0, "단백질": 8.9, "탄수화물": 27.4, "지방": 2.6, "철분": 2.9},
    "케일": {"칼로리": 35.0, "단백질": 2.9, "탄수화물": 4.4, "지방": 0.5, "철분": 1.6},
    "렌틸콩": {"칼로리": 116.0, "단백질": 9.0, "탄수화물": 20.1, "지방": 0.4, "철분": 3.3},
    "퀴노아": {"칼로리": 120.0, "단백질": 4.1, "탄수화물": 21.3, "지방": 1.9, "철분": 1.5},
    "브로콜리": {"칼로리": 34.0, "단백질": 2.8, "탄수화물": 6.6, "지방": 0.4, "철분": 0.7},
    "아몬드": {"칼로리": 576.0, "단백질": 21.1, "탄수화물": 21.6, "지방": 49.4, "철분": 3.7},
    "시금치": {"칼로리": 23.0, "단백질": 2.9, "탄수화물": 3.6, "지방": 0.4, "철분": 2.7},
    "호박": {"칼로리": 26.0, "단백질": 1.0, "탄수화물": 6.5, "지방": 0.1, "철분": 0.8},
    "두부": {"칼로리": 76.0, "단백질": 8.0, "탄수화물": 1.9, "지방": 4.8, "철분": 1.6},
    "콩나물": {"칼로리": 35.0, "단백질": 3.0, "탄수화물": 6.4, "지방": 0.4, "철분": 0.7},
    "버섯": {"칼로리": 22.0, "단백질": 3.1, "탄수화물": 3.3, "지방": 0.3, "철분": 0.5},
    "양배추": {"칼로리": 25.0, "단백질": 1.3, "탄수화물": 5.8, "지방": 0.1, "철분": 0.5},
    "비트": {"칼로리": 43.0, "단백질": 1.6, "탄수화물": 9.6, "지방": 0.2, "철분": 0.8},
    "자몽": {"칼로리": 42.0, "단백질": 0.8, "탄수화물": 10.5, "지방": 0.1, "철분": 0.2},
    "배추": {"칼로리": 17.0, "단백질": 1.1, "탄수화물": 3.9, "지방": 0.1, "철분": 0.5},
    "사과": {"칼로리": 52.0, "단백질": 0.3, "탄수화물": 13.8, "지방": 0.2, "철분": 0.1},
    "오이": {"칼로리": 16.0, "단백질": 0.7, "탄수화물": 3.6, "지방": 0.1, "철분": 0.2},
    "파프리카": {"칼로리": 20.0, "단백질": 0.9, "탄수화물": 4.6, "지방": 0.2, "철분": 0.4},
    "아티초크": {"칼로리": 47.0, "단백질": 3.5, "탄수화물": 10.5, "지방": 0.2, "철분": 1.0},
    "가지": {"칼로리": 25.0, "단백질": 1.0, "탄수화물": 5.9, "지방": 0.2, "철분": 0.2},
    "올리브": {"칼로리": 115.0, "단백질": 1.0, "탄수화물": 6.0, "지방": 10.5, "철분": 0.5},
    "피망": {"칼로리": 20.0, "단백질": 1.0, "탄수화물": 4.6, "지방": 0.2, "철분": 0.4},
    "감자": {"칼로리": 77.0, "단백질": 2.0, "탄수화물": 17.5, "지방": 0.1, "철분": 0.5},
    "청경채": {"칼로리": 13.0, "단백질": 1.5, "탄수화물": 2.2, "지방": 0.2, "철분": 0.4},
    "피스타치오": {"칼로리": 562.0, "단백질": 20.6, "탄수화물": 28.0, "지방": 45.3, "철분": 4.0},
    "배": {"칼로리": 57.0, "단백질": 0.4, "탄수화물": 15.2, "지방": 0.1, "철분": 0.2},
}

# 추천 요리 데이터
recommended_recipes = {
    "아보카도": "아보카도 토스트",
    "바나나": "바나나 스무디",
    "토마토": "토마토 샐러드",
    "고구마": "고구마 스프",
    "병아리콩": "병아리콩 샐러드",
    "케일": "케일 스무디",
    "렌틸콩": "렌틸콩 스튜",
    "퀴노아": "퀴노아 볼",
    "브로콜리": "브로콜리 볶음",
    "아몬드": "아몬드 스낵",
    "시금치": "시금치 커리",
    "호박": "호박 수프",
    "두부": "두부 스테이크",
    "콩나물": "콩나물국",
    "버섯": "버섯 리조또",
    "양배추": "양배추 샐러드",
    "비트": "비트 샐러드",
    "자몽": "자몽 샐러드",
    "배추": "배추김치",
    "사과": "사과 샐러드",
    "오이": "오이 무침",
    "파프리카": "파프리카 볶음",
    "아티초크": "아티초크 샐러드",
    "렌틸콩": "렌틸콩 스튜",
    "가지": "가지 볶음",
    "브로콜리": "브로콜리 볶음",
    "올리브": "올리브 파스타",
    "피망": "피망 볶음",
    "감자": "감자 샐러드",
    "청경채": "청경채 볶음",
    "피스타치오": "피스타치오 스낵",
    "배": "배 스무디",
}

# 타이틀과 설명
st.markdown(
    """
    <style>
    .main-title {
        text-align: center;
        font-size: 2.5em;
        color: #2c3e50;
        margin-bottom: 20px;
    }
    .section-title {
        font-size: 1.5em;
        color: #16a085;
        margin-top: 20px;
    }
    .result-box {
        background-color: #ecf0f1;
        padding: 15px;
        border-radius: 10px;
        margin: 10px 0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    </style>
    <h1 class="main-title">👨‍🍳비건 음식 영양소 계산기 및 추천 요리</h1>
    """,
    unsafe_allow_html=True,
)

st.write("음식을 선택하고 양을 입력하여 영양소를 계산하세요!")

# 음식 선택
st.markdown("<h3 class='section-title'>음식 선택</h3>", unsafe_allow_html=True)
food = st.selectbox("음식 선택", options=list(data.keys()))

# 양 입력 (기본값: 100g)
st.markdown("<h3 class='section-title'>양 입력</h3>", unsafe_allow_html=True)
amount = st.number_input("양 (g)", min_value=1, max_value=1000, value=100, step=10)

# 계산 버튼
if st.button("영양소 계산"):
    # 선택한 음식의 영양소 계산
    nutrition = data[food]
    calories = nutrition["칼로리"] * (amount / 100)
    protein = nutrition["단백질"] * (amount / 100)
    carbs = nutrition["탄수화물"] * (amount / 100)
    fat = nutrition["지방"] * (amount / 100)
    iron = nutrition["철분"] * (amount / 100)

    # 결과 출력
    st.markdown(f"<h3 class='section-title'>🌟{food} {amount}g 의 영양소</h3>", unsafe_allow_html=True)
    st.markdown(
        f"""
        <div class="result-box">
         **열량**: {calories:.1f} kcal<br>
         **단백질**: {protein:.1f} g<br>
         **탄수화물**: {carbs:.1f} g<br>
         **지방**: {fat:.1f} g<br>
         **철분**: {iron:.1f} mg<br>
        </div>
        """,
        unsafe_allow_html=True,
    )

    # 추천 요리 출력
    recipe = recommended_recipes[food]
    st.markdown("<h3 class='section-title'>🥣추천 요리</h3>", unsafe_allow_html=True)
    st.markdown(
        f"""
        <div class="result-box">
        {food}와 관련된 추천 요리: **{recipe}**
        </div>
        """,
        unsafe_allow_html=True,
    )
